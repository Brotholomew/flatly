(this.webpackJsonpflatly=this.webpackJsonpflatly||[]).push([[0],{119:function(e,t,n){},258:function(e,t,n){"use strict";n.r(t);var i=n(0),c=n.n(i),a=n(35),r=n.n(a),o=(n(119),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,260)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),i(e),c(e),a(e),r(e)}))}),l=n(12),s=n(2),d=n(1);var u=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h3",{children:"This is app header"}),Object(d.jsx)(l.b,{to:"".concat("/flatly/develop","/auth/login"),children:"Login"})]})};var j=function(e){return Object(d.jsx)("main",{children:e.children})};var b=function(){return Object(d.jsx)("h3",{children:"This is app footer"})};var h=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(u,{}),Object(d.jsx)(j,{children:Object(d.jsx)(s.b,{})}),Object(d.jsx)(b,{})]})},O=n(37),f=n(3),x=n(6),p=n(9),m=n(11),v=n(103),g=n.n(v).a.create({baseURL:"http://20.127.80.3:8080/api/v1/",timeout:1e4,maxBodyLength:5e3,maxContentLength:5e3,headers:{"Content-type":"application/json; charset=UTF-8"}});g.interceptors.request.use((function(e){return e}),(function(e){throw e})),g.interceptors.response.use((function(e){return e.data}),(function(e){throw e}));var y=g,N=function e(){Object(f.a)(this,e),this.axios=y},S=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"logIn",value:function(e){return this.axios.post("login",e)}}]),n}(N),w=new S,F=n(4),L=n(104),C=n.n(L),I=n(105),R=n.n(I)()(C.a),q={toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0},k=function(){var e=function(e){R.fire(Object(F.a)(Object(F.a)({},q),e))};return{success:function(t){e(Object(F.a)(Object(F.a)({},t),{},{icon:"success"}))},error:function(t){e(Object(F.a)(Object(F.a)({},t),{},{icon:"error"}))},info:function(t){e(Object(F.a)(Object(F.a)({},t),{},{icon:"info"}))},warning:function(t){e(Object(F.a)(Object(F.a)({},t),{},{icon:"warning"}))},toast:e}},T="LOGIN_SUCCESS",A="LOGIN_FAILURE",E="LOGOUT",P=function(){var e=Object(O.c)((function(e){return e.authReducers})),t=e.user,n=e.isLoggedIn,i=Object(O.b)(),c=k(),a=c.success,r=c.error,o=Object(s.h)();return{user:t,isLoggedIn:n,login:function(e,t){return w.logIn({email:e,password:t}).then((function(e){i({type:T,payload:e.data}),a({title:"Logged in successfully!"}),o("".concat("/flatly/develop","/"))})).catch((function(e){throw console.log(e),i({type:A}),r({title:"Invalid credentials!"}),e}))},logout:function(){i({type:E}),a({title:"Logged out successfully!"}),o("".concat("/flatly/develop","/auth/login"))}}};var D=function(){var e=P().logout;return Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:"Home page"}),Object(d.jsx)(l.b,{to:"".concat("/flatly/develop","/flats"),children:"Flats"}),Object(d.jsx)("button",{onClick:function(){return e()},children:"Log out"})]})};var U=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h3",{children:"This is auth header"}),Object(d.jsx)(l.b,{to:"".concat("/flatly/develop","/"),children:"Home"})]})};var B=function(e){return Object(d.jsx)("main",{children:e.children})};var J=function(){return Object(d.jsx)("h3",{children:"This is auth footer"})};var M=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(U,{}),Object(d.jsx)(B,{children:Object(d.jsx)(s.b,{})}),Object(d.jsx)(J,{})]})},_=n(8),G=n(21),H=n(15),V=function(){return{login:H.b({email:H.c().required("Required").email("Invalid e-mail address"),password:H.c().required("Required")}),flat:H.b({name:H.c().required("Required"),rooms:H.a().required("Required").min(1,"The Flat needs to have at least one room"),area:H.a().required("Required").min(2.5,"The Flat needs to be at least 2.5 metres squared"),facilities:H.c().required("Required"),description:H.c().required("Required"),streetName:H.c().required("Required"),houseNumber:H.c().required("Required"),postalCode:H.c().required("Required").matches(/^\d{2}-\d{3}$/,"Postal code must match format: xx-xxx"),city:H.c().required("Required")})}},z=n(17),W=function(){return{TextInput:function(e){var t=e.label,n=e.props,i=e.id,c=e.loading,a=Object(G.c)(n),r=Object(_.a)(a,2),o=r[0],l=r[1];return Object(d.jsxs)("div",{className:"form-text-input",children:[Object(d.jsx)("label",{htmlFor:i||n.name,children:t}),c?Object(d.jsx)(z.a,{}):Object(d.jsx)("input",Object(F.a)(Object(F.a)({className:"text-input"},o),n)),l.touched&&l.error?Object(d.jsx)("div",{className:"error",children:l.error}):null]})},TextArea:function(e){var t=e.label,n=e.props,i=e.id,c=e.loading,a=Object(G.c)(n),r=Object(_.a)(a,2),o=r[0],l=r[1];return Object(d.jsxs)("div",{className:"form-text-area-input",children:[Object(d.jsx)("label",{htmlFor:i||n.name,children:t}),c?Object(d.jsx)(z.a,{}):Object(d.jsx)("textarea",Object(F.a)(Object(F.a)({className:"text-area"},o),n)),l.touched&&l.error?Object(d.jsx)("div",{className:"error",children:l.error}):null]})}}},Y=n(111);var $=function(e){var t,n;return Object(d.jsx)("button",{className:"default-button default-button--".concat(null!==(t=e.type)&&void 0!==t?t:"info"),onClick:function(){e.click&&e.click()},type:null!==(n=e.htmlType)&&void 0!==n?n:"button",children:e.loading?Object(d.jsx)("span",{children:"Loading"}):Object(d.jsxs)(d.Fragment,{children:[e.icon?Object(d.jsx)(Y.a,{icon:e.icon,style:{marginRight:"2px"}}):"",e.children]})})},K=function(e){var t=V().login,n=W().TextInput;return Object(d.jsx)(G.b,{initialValues:{email:"",password:""},validationSchema:t,onSubmit:function(t,n){var i=n.setSubmitting;e.handleLoginCallback(t.email,t.password),i(!1),t.password=""},children:Object(d.jsxs)(G.a,{children:[Object(d.jsx)(n,{label:"E-Mail:",props:{name:"email",type:"text"},id:"email"}),Object(d.jsx)(n,{label:"Password",props:{name:"password",type:"password"},id:"password"}),Object(d.jsx)($,{htmlType:"submit",icon:"sign-in-alt",loading:e.isLoading,children:"Login"})]})})};var Q=function(){var e=Object(i.useState)(!1),t=Object(_.a)(e,2),n=t[0],c=t[1],a=P().login;return Object(d.jsxs)("div",{children:[Object(d.jsx)("h4",{children:"john@doe.com | password"}),Object(d.jsx)(K,{handleLoginCallback:function(e,t){c(!0),a(e,t).catch((function(){c(!1)}))},isLoading:n})]})};var X=function(){return P().isLoggedIn?Object(d.jsx)(s.a,{to:"".concat("/flatly/develop","/")}):Object(d.jsx)(s.b,{})};var Z,ee=function(){var e=P().isLoggedIn,t=k().error;return e?Object(d.jsx)(s.b,{}):(t({title:"You are not authenticated!"}),Object(d.jsx)(s.a,{to:"".concat("/flatly/develop","/auth/login")}))},te=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(f.a)(this,n);for(var i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).resource=void 0,e}return Object(x.a)(n,[{key:"index",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.resource;t&&(n+="?",Object.keys(t).forEach((function(e){n+=e+"="+encodeURI(t[e])+"&"})));for(var i=arguments.length,c=new Array(i>1?i-1:0),a=1;a<i;a++)c[a-1]=arguments[a];return(e=this.axios).get.apply(e,[n].concat(c))}},{key:"show",value:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),c=1;c<n;c++)i[c-1]=arguments[c];return(t=this.axios).get.apply(t,[this.resource+"/"+e].concat(i))}},{key:"store",value:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),c=1;c<n;c++)i[c-1]=arguments[c];return(t=this.axios).post.apply(t,[this.resource,e].concat(i))}},{key:"update",value:function(e,t){for(var n,i=arguments.length,c=new Array(i>2?i-2:0),a=2;a<i;a++)c[a-2]=arguments[a];return(n=this.axios).put.apply(n,[this.resource+"/"+e,t].concat(c))}},{key:"destroy",value:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),c=1;c<n;c++)i[c-1]=arguments[c];return(t=this.axios).delete.apply(t,[this.resource+"/"+e].concat(i))}}]),n}(N),ne=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(f.a)(this,n);for(var i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).resource="flats",e}return n}(te),ie=new ne,ce=function(){var e=Object(i.useState)(!1),t=Object(_.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)([]),r=Object(_.a)(a,2),o=r[0],l=r[1],s=Object(i.useState)(),d=Object(_.a)(s,2),u=d[0],j=d[1];return{flatsLoading:n,flats:o,flat:u,fetchFlats:function(){return new Promise((function(e,t){return c(!0),ie.index().then((function(t){l(t),e(!0)})).catch((function(e){return t(e)})).finally((function(){return c(!1)}))}))},fetchFlat:function(e){return new Promise((function(t,n){return c(!0),ie.show(e).then((function(e){j(e),t(!0)})).catch((function(e){return n(e)})).finally((function(){return c(!1)}))}))}}};function ae(e){return"".concat(e.streetName," ").concat(e.houseNumber," ").concat(e.flatNumber?"/"+e.flatNumber:"")}function re(e){return"".concat(e.postalCode," ").concat(e.city)}!function(e){e.INFO="info",e.SUCCESS="success",e.ERROR="error"}(Z||(Z={}));var oe=function(e){var t=Object(s.h)();return Object(d.jsxs)("div",{className:"list-item",children:[Object(d.jsx)("h2",{children:e.flat.name}),Object(d.jsxs)("ul",{children:[Object(d.jsxs)("li",{children:[e.flat.rooms," rooms"]}),Object(d.jsxs)("li",{children:[ae(e.flat.address)," "]}),Object(d.jsxs)("li",{children:[re(e.flat.address)," "]})]}),Object(d.jsxs)("div",{className:"list-item__buttons",children:[Object(d.jsx)($,{click:function(){t("".concat("/flatly/develop","/flats/").concat(e.flat.id,"/details"))},icon:"eye",children:"Details"}),Object(d.jsx)($,{click:function(){t("".concat("/flatly/develop","/flats/").concat(e.flat.id,"/edit"))},type:Z.INFO,icon:"pen",children:"Edit"}),Object(d.jsx)($,{click:function(){},type:Z.ERROR,icon:"trash",children:"Delete"})]})]})},le=n(259);var se=function(){var e=ce(),t=e.flatsLoading,n=e.flats,i=e.fetchFlats;return Object(le.a)((function(){return i()})),Object(d.jsx)("div",{children:t?Array.from(Array(5).keys()).map((function(e){return Object(d.jsx)("div",{children:Object(d.jsx)(z.a,{count:3})},e)})):n.map((function(e){return Object(d.jsx)(oe,{flat:e},e.id)}))})};var de=function(){var e,t,n,i,c,a,r=Object(s.i)().id,o=ce(),l=o.flat,u=o.fetchFlat,j=Object(s.h)(),b=k().error;return Object(le.a)((function(){return u(r).catch((function(){b({title:"Flat with provided id has not been found!"}),j("".concat("/flatly/develop","'/flats"))}))})),Object(d.jsx)("div",{children:Object(d.jsx)("div",{children:Object(d.jsx)("table",{children:Object(d.jsxs)("tbody",{children:[Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"ID"}),Object(d.jsx)("td",{children:null!==(e=null===l||void 0===l?void 0:l.id)&&void 0!==e?e:Object(d.jsx)(z.a,{width:80})})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"Name"}),Object(d.jsx)("td",{children:null!==(t=null===l||void 0===l?void 0:l.name)&&void 0!==t?t:Object(d.jsx)(z.a,{width:200})})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"Rooms"}),Object(d.jsx)("td",{children:null!==(n=null===l||void 0===l?void 0:l.rooms)&&void 0!==n?n:Object(d.jsx)(z.a,{width:40})})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"Area"}),Object(d.jsx)("td",{children:null!==(i=null===l||void 0===l?void 0:l.area)&&void 0!==i?i:Object(d.jsx)(z.a,{})})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"Facilities"}),Object(d.jsx)("td",{children:(null===l||void 0===l?void 0:l.facilities)?null===l||void 0===l?void 0:l.facilities.join(", "):Object(d.jsx)(z.a,{width:180})})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"Address"}),Object(d.jsx)("td",{children:(null===l||void 0===l?void 0:l.address)?(a=null===l||void 0===l?void 0:l.address,a?"".concat(ae(a)," ").concat(re(a)):""):Object(d.jsx)(z.a,{width:200})})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"Description"}),Object(d.jsx)("td",{children:null!==(c=null===l||void 0===l?void 0:l.description)&&void 0!==c?c:Object(d.jsx)(z.a,{count:4})})]})]})})})})},ue=n(112),je=n.n(ue),be=function(e){var t,n,i,c,a,r,o,l,s,u,j,b=V().flat,h=W(),O=h.TextInput,f=h.TextArea,x=void 0===e.initialState;return Object(d.jsx)(G.b,{enableReinitialize:!0,initialValues:{name:null===(t=e.initialState)||void 0===t?void 0:t.name,rooms:null===(n=e.initialState)||void 0===n?void 0:n.rooms,area:null===(i=e.initialState)||void 0===i?void 0:i.area,facilities:null===(c=e.initialState)||void 0===c||null===(a=c.facilities)||void 0===a?void 0:a.join(","),description:null===(r=e.initialState)||void 0===r?void 0:r.description,streetName:null===(o=e.initialState)||void 0===o?void 0:o.address.streetName,houseNumber:null===(l=e.initialState)||void 0===l?void 0:l.address.houseNumber,flatNumber:null===(s=e.initialState)||void 0===s?void 0:s.address.flatNumber,postalCode:null===(u=e.initialState)||void 0===u?void 0:u.address.postalCode,city:null===(j=e.initialState)||void 0===j?void 0:j.address.city},validationSchema:b,onSubmit:function(t,n){var i,c,a,r=n.setSubmitting;je()((null===(i=e.initialState)||void 0===i?void 0:i.id)&&t.name&&t.facilities&&t.description&&t.streetName&&t.houseNumber&&t.postalCode&&t.city),e.updateFlatCallback({id:null===(c=e.initialState)||void 0===c?void 0:c.id,name:t.name,rooms:t.rooms,area:t.area,facilities:null===t||void 0===t||null===(a=t.facilities)||void 0===a?void 0:a.split(","),description:t.description,images:[],address:{streetName:t.streetName,houseNumber:t.houseNumber,flatNumber:t.flatNumber,postalCode:t.postalCode,city:t.city}}),r(!1)},children:Object(d.jsxs)(G.a,{children:[Object(d.jsx)(O,{label:"Name:",props:{name:"name",type:"text"},id:"name",loading:x}),Object(d.jsx)(O,{label:"Rooms",props:{name:"rooms",type:"number"},id:"rooms",loading:x}),Object(d.jsx)(O,{label:"Area",props:{name:"area",type:"number"},id:"area",loading:x}),Object(d.jsx)(O,{label:"Facilities",props:{name:"facilities",type:"text"},id:"facilities",loading:x}),Object(d.jsx)(O,{label:"Street Name",props:{name:"streetName",type:"text"},id:"streetName",loading:x}),Object(d.jsx)(O,{label:"House Number",props:{name:"houseNumber",type:"text"},id:"houseNumber",loading:x}),Object(d.jsx)(O,{label:"Flat Number",props:{name:"flatNumber",type:"text"},id:"flatNumber",loading:x}),Object(d.jsx)(O,{label:"Postal Code",props:{name:"postalCode",type:"text"},id:"postalCode",loading:x}),Object(d.jsx)(O,{label:"City",props:{name:"city",type:"text"},id:"city",loading:x}),Object(d.jsx)(f,{label:"Description",props:{name:"description"},id:"description",loading:x}),Object(d.jsx)($,{htmlType:"submit",icon:"save",loading:e.loading,children:"Save"})]})})},he={streetName:"",houseNumber:"",flatNumber:void 0,postalCode:"",city:""},Oe={id:function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}(),name:"",address:he,rooms:void 0,area:void 0,facilities:[],images:[],description:""};var fe=function(){var e=Object(i.useState)(!1),t=Object(_.a)(e,2),n=t[0],c=t[1],a=Object(s.i)().id,r=Object(s.g)().pathname,o=ce(),l=o.flat,u=o.fetchFlat,j=k().error,b=Object(s.h)(),h=!r.includes("edit");return Object(le.a)((function(){h||u(a).catch((function(){j({title:"Flat with provided id has not been found!"}),b("".concat("/flatly/develop","/flats"))}))})),Object(d.jsxs)("div",{children:[Object(d.jsx)($,{icon:"chevron-left",click:function(){return b("".concat("/flatly/develop","/flats"))},children:"Back"}),Object(d.jsx)(be,{updateFlatCallback:function(e){c(!0),h?ie.store(e).catch((function(){return console.error("Error while adding the flat")})).finally((function(){return c(!1)})):ie.update(e.id,e).catch((function(){return console.error("Error while updating the flat")})).finally((function(){return c(!1)}))},initialState:h?Oe:l,loading:n})]})};var xe=function(){return Object(d.jsx)(l.a,{children:Object(d.jsxs)(s.e,{children:[Object(d.jsx)(s.c,{path:"".concat("/flatly/develop","/"),element:Object(d.jsx)(h,{}),children:Object(d.jsxs)(s.c,{element:Object(d.jsx)(ee,{}),children:[Object(d.jsx)(s.c,{path:"",element:Object(d.jsx)(D,{})}),Object(d.jsx)(s.c,{path:"flats",element:Object(d.jsx)(se,{})}),Object(d.jsx)(s.c,{path:"flats/:id/details",element:Object(d.jsx)(de,{})}),Object(d.jsx)(s.c,{path:"flats/:id/edit",element:Object(d.jsx)(fe,{})}),Object(d.jsx)(s.c,{path:"flats/add",element:Object(d.jsx)(fe,{})})]})}),Object(d.jsx)(s.c,{path:"".concat("/flatly/develop","/auth"),element:Object(d.jsx)(M,{}),children:Object(d.jsx)(s.c,{element:Object(d.jsx)(X,{}),children:Object(d.jsx)(s.c,{path:"login",element:Object(d.jsx)(Q,{})})})})]})})},pe=n(53),me="user",ve=localStorage.getItem(me),ge=ve?JSON.parse(ve):null,ye=ge?{isLoggedIn:!0,user:ge}:{isLoggedIn:!1,user:null};var Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0,n=t.type,i=t.payload;switch(n){case T:return localStorage.setItem(me,JSON.stringify(i)),Object(F.a)(Object(F.a)({},e),{},{isLoggedIn:!0,user:i});case A:return Object(F.a)(Object(F.a)({},e),{},{isLoggedIn:!1,user:null});case E:return localStorage.removeItem(me),Object(F.a)(Object(F.a)({},e),{},{isLoggedIn:!1,user:null});default:return e}},Se=n(113),we=Object(pe.combineReducers)({authReducers:Ne}),Fe=Object(pe.createStore)(we,Object(Se.composeWithDevTools)()),Le=(n(257),n(27)),Ce=n(114);Le.b.add(Ce.a),r.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(O.a,{store:Fe,children:Object(d.jsx)(xe,{})})}),document.getElementById("root")),o()}},[[258,1,2]]]);
//# sourceMappingURL=main.cbfc97c6.chunk.js.map